@page "/devices"
@using SSH_Configurer_UI.Model;
@using SSH_Configurer_UI.Components;
@using SSH_Configurer_UI.Services;
@inject NavigationManager navManager;

<DeviceList Devices="devices" DeleteCurrentDevice="DeleteDevice" UpdateCurrentDevice="UpdateDevice"></DeviceList>

@code {
    private List<Device> devices;

    [Inject]
    public IDeviceService deviceService { get; set; }

    protected override async Task OnInitializedAsync()
    {
        devices = (await deviceService.GetAllDevices()).ToList();

        await base.OnInitializedAsync();
    }

    private void DeleteDevice(Device device)
    {
        deviceService.RemoveDevice(device);
    }

    private void UpdateDevice(int id)
    {
        navManager.NavigateTo($"./update-device/{id}");
    }
}
